source-file ~/.tmux/reset

# ======================== COMMANDS ============================ #
#
#       tmux new -s 'session name'                 -    Create new session with a name (mxnew)
#       tmux new -s 'session name' -c 'root-dir'   -    Create new session with a name (mxnew)
#       tmux kill-ses -t 'session'                 -    Kill session (mxkill)
#       tmux a                                     -    Attach to last Session
#       tmux a -t                                  -    Attach to session with name
#
#       prefix + :                                 -    Opens tmux command line
#
# ============================ KEYS ============================ #
#       LEADER --> Space
#
#       prefix + ,   --> Rename window
#       prefix + .   --> Move window
#       prefix + c   --> New window

#       prefix + d   --> Exit session
#       prefix + e   --> List sessions
#
#       prefix + S   --> Save sessions (plugin)
#       prefix + Q   --> Reload sessions (plugin)
#
# -------------------------- CUSTOM -------------------------- 
#
#       prefix + C-f --> Find session
#       prefix + Tab --> Change to last session
#       prefix + a --> Kill current session
#       prefix + n --> Create new session
#       prefix + a --> Change working directory
#
#       prefix + space --> Next window
#       prefix + bspace --> Prev window

#       prefix + s --> Split pane horizontally
#       prefix + v --> Split pane vertically
#       prefix + [h j k l] --> Vim Navigation between panes
#       prefix + [H J K L] --> Resising panes with Vim Keys
#       prefix + C-o --> Change the possitions of split panes
#       prefix + > -->  Swap current pane with the next one
#       prefix + < -->  Swap current pane with the prev one
#
#       prefix + L --> Reload tmux config
#
#       prefix + [ --> Enter copy mode
#       prefix + p --> Paste from clipboard
#       prefix + P --> Choose which buffer to paste from
#
# ============================================================== #

# >>>> ====== TMUX SETTINGS ====== <<<<
set -g mouse on
set -s escape-time 0

# -- Unlimited scrollback
set -g history-limit 9999999

# -- prefix override
unbind C-b
# set -g prefix C-Space
set -g prefix C-x
bind Space send-prefix

setw -g mode-keys vi # <3

unbind '"'
unbind %

# -- change to next and previous session
# bind -n o switch-client -n
# bind -n i switch-client -p

# >>>> ====== CONFIG RELOAD ====== <<<<
bind r source-file ~/.tmux.conf \; display-message "tmux.conf reloaded."

# >>>> ====== SESSIONS ====== <<<<

bind C-f command-prompt -p find-session 'switch-client -t %%'
bind n command-prompt -p "create-session [-c start-directory] | Session Name:" 'new-session -s %1'
bind '"' command-prompt -p "working-directory | Directory: " 'attach-session -t . -c %%'

bind e choose-tree -Zs
bind a kill-session
bind Tab switch-client -l

# >>>> ====== PANES ====== <<<<

bind s split-window -h
bind v split-window -v
bind C-o rotate-window

bind -r h select-pane -L
bind -r j select-pane -D
bind -r k select-pane -U
bind -r l select-pane -R

bind -r H resize-pane -L 2
bind -r J resize-pane -D 2
bind -r K resize-pane -U 2
bind -r L resize-pane -R 2

bind > swap-pane -D 
bind < swap-pane -U

# >>>> ====== WINDOWS ====== <<<<

bind space next-window
bind bspace previous-window

# >>>> ====== COPY MODE ====== <<<<

# --> List all copy mode commands for tmux ['list-keys -T copy-mode-vi']

bind [ copy-mode # enter copy mode
bind p paste-buffer
bind P choose-buffer # choose which buffer to paste from

bind -T copy-mode-vi Y send -X copy-end-of-line
bind -T copy-mode-vi L send -X end-of-line
bind -T copy-mode-vi H send -X start-of-line

bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"
# bind -T copy-mode-vi y send -X copy-pipe-and-cancel "xclip -se c -i" 

# -- Update default binding of `Enter` to also use copy-pipe
unbind -T copy-mode-vi Enter
bind -T copy-mode-vi Enter send -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"
# bind -T copy-mode-vi Enter send -X copy-pipe-and-cancel "xclip -se c -i"

# >>>> ====== PLUGINS ====== <<<<
set -g @plugin 'wfxr/tmux-power'
set -g @plugin 'hallazzang/tmux-reset'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

set -g @tmux_power_theme 'gold'

# stop continuum auto saving
set -g @continuum-save-interval '0'

# set auto save interval to an hour
# set -g @continuum-save-interval '60'

# open tmux save in alacritty on computer start
set -g @continuum-boot 'on'
set -g @continuum-boot-options 'alacritty'

# https://github.com/tmux-plugins/tpm
# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
